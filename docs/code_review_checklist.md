# GastronomeJourney コードレビューチェックリスト

## 1. はじめに

このドキュメントは、GastronomeJourneyアプリケーションのコードレビュープロセスを標準化し、一貫した品質を確保するためのチェックリストです。レビュアーはこのガイドラインに従ってコードをレビューし、すべての変更が品質基準を満たすことを確認してください。

## 2. レビュープロセス

1. 開発者はコードを実装し、プルリクエスト（PR）を作成
2. レビュアーはこのチェックリストに基づいてコードをレビュー
3. 問題があれば、PRにコメントとして記録
4. 開発者は指摘された問題を修正
5. レビュアーは修正を確認し、問題がなければPRを承認

すべてのPRは少なくとも1人のレビュアーによる承認が必要です。

## 3. 一般的なコード品質チェック

### 3.1. コードの読みやすさ

- [ ] 命名規則が一貫して適用されている
  - クラス名は`UpperCamelCase`
  - メソッド名と変数名は`lowerCamelCase`
  - 定数は`UPPER_SNAKE_CASE`
- [ ] コメントは必要な場所にのみ存在し、明確で価値がある
- [ ] コードはシンプルかつ理解しやすい
- [ ] 複雑な条件式や論理は適切に分割されている
- [ ] ネストが深すぎない（3レベル以下を推奨）
- [ ] 一貫したインデントとフォーマットが守られている

### 3.2. コードの構造

- [ ] クラスとメソッドの責任が明確である（単一責任の原則）
- [ ] メソッドの長さは適切である（50行以下を推奨）
- [ ] クラスの長さは適切である（300行以下を推奨）
- [ ] 重複コードが存在しない
- [ ] 適切な抽象化レベルが使用されている
- [ ] コードの分布が論理的である（関連する機能は同じファイルまたは近いファイルに配置）

### 3.3. エラー処理

- [ ] すべての例外が適切に処理されている
- [ ] エラーメッセージは具体的で理解しやすい
- [ ] エラー状態からの回復メカニズムが存在する
- [ ] エラーのログ記録が適切に行われている
- [ ] 異常系のケースが考慮されている

### 3.4. セキュリティ

- [ ] 認証とアクセス制御が適切に実装されている
- [ ] センシティブなデータが安全に保存・転送されている
- [ ] 入力検証が行われている（特にユーザー入力）
- [ ] SQLインジェクションやXSSなどの脆弱性が防止されている
- [ ] シークレットキーやトークンがコードにハードコーディングされていない

## 4. Flutter/Dart固有のチェック

### 4.1. Dart言語のベストプラクティス

- [ ] Null安全性が適切に実装されている
- [ ] 不必要なnull演算子が使用されていない
- [ ] `async`/`await`が適切に使用されている
- [ ] 不要な`Future.then()`の連鎖がない
- [ ] コレクションの操作が効率的に行われている
- [ ] `final`と`const`が適切に使用されている
- [ ] 不要なインポートが削除されている
- [ ] lint警告がすべて解決されている

### 4.2. Flutterウィジェット実装

- [ ] ウィジェットツリーが過度に複雑になっていない
- [ ] `const`コンストラクターが可能な場所で使用されている
- [ ] キー（`Key`）が適切に使用されている
- [ ] ステートフルウィジェットの状態管理が適切である
- [ ] パフォーマンスを考慮した実装になっている
  - リスト表示には`ListView.builder`が使用されている
  - 大量のデータ処理は非UIスレッドで行われている
- [ ] レスポンシブデザインが実装されている
- [ ] アクセシビリティ要件が考慮されている
  - セマンティックラベルが提供されている
  - コントラスト比が適切である
  - ナビゲーションが論理的かつアクセス可能である

### 4.3. Riverpodの使用

- [ ] Providerの依存関係が明確かつ循環していない
- [ ] 適切なProviderタイプが選択されている
- [ ] `ref.watch`と`ref.read`が適切に使用されている
- [ ] 不要な再構築を引き起こしていない
- [ ] プロバイダーの名前が明確で理解しやすい
- [ ] Providerの範囲（スコープ）が適切に設定されている

### 4.4. アプリアーキテクチャの一貫性

- [ ] アプリのアーキテクチャパターンに従っている
- [ ] レイヤー間の依存関係が適切である
  - UI層はビジネスロジック層に依存する
  - ビジネスロジック層はデータ層に依存する
  - 依存関係が一方向である
- [ ] ディレクトリ構造が整理されている
- [ ] リポジトリパターンが適切に実装されている
- [ ] モデルクラスが適切に設計されている

## 5. テスト関連のチェック

- [ ] 新機能に対応するテストが追加されている
- [ ] 既存の自動テストがすべて合格している
- [ ] テストカバレッジが目標値を満たしている（最低80%）
- [ ] ユニットテストが存在する
- [ ] ウィジェットテストが存在する（UIの場合）
- [ ] 統合テストが必要な場合は実装されている
- [ ] テストケースが境界条件と異常系をカバーしている
- [ ] モックとスタブが適切に使用されている
- [ ] テストが独立していて再現可能である

## 6. パフォーマンスのチェック

- [ ] アプリのパフォーマンスに悪影響を与える可能性のある変更がない
- [ ] メモリリークを引き起こす可能性のあるコードがない
- [ ] 効率的でないアルゴリズムやデータ構造が使用されていない
- [ ] 不必要なネットワークリクエストが行われていない
- [ ] リソース（バッテリー、CPU、メモリ）の使用が最適化されている
- [ ] 重い処理はバックグラウンドスレッドで実行されている
- [ ] 画像とアセットが最適化されている

## 7. Firebase関連のチェック

- [ ] Firestoreのクエリが効率的である
- [ ] 適切なインデックスが設定されている
- [ ] セキュリティルールが適切に設定・テストされている
- [ ] バッチ処理やトランザクションが必要な場合に使用されている
- [ ] オフラインサポートが適切に実装されている
- [ ] Cloud Functionsが効率的に実装されている
- [ ] Firebase Analyticsが適切に実装されている

## 8. ユーザー体験のチェック

- [ ] UIデザインシステムガイドラインに従っている
- [ ] ユーザーフィードバックが適切に提供されている
  - ローディング状態が表示される
  - エラー状態が明確に表示される
  - 成功状態が確認できる
- [ ] アニメーションがスムーズで過剰でない
- [ ] タッチターゲットが十分な大きさである（最低44x44pt）
- [ ] キーボードナビゲーションが機能する
- [ ] ダークモードがサポートされている
- [ ] 多言語対応が適切に実装されている

## 9. ドキュメントのチェック

- [ ] APIドキュメントが更新されている
- [ ] 複雑な機能やアルゴリズムに説明が追加されている
- [ ] READMEが必要に応じて更新されている
- [ ] コミットメッセージが明確で説明的である
- [ ] プルリクエストの説明が十分詳細である

## 10. コード受け入れ基準

以下の基準をすべて満たしている場合にのみ、コードは承認されるべきです：

1. このチェックリストのすべての関連項目を満たしている
2. 自動テストがすべて合格している
3. コードレビューで指摘されたすべての問題が解決されている
4. コードが機能要件を満たしている
5. パフォーマンス要件を満たしている
6. セキュリティ要件を満たしている

## 11. 追加リソース

- [Effective Dart](https://dart.dev/guides/language/effective-dart)
- [Flutter Performance Best Practices](https://flutter.dev/docs/perf/rendering/best-practices)
- [Firebase Security Rules](https://firebase.google.com/docs/rules)
- [Riverpod ドキュメント](https://riverpod.dev/docs/getting_started)

## 12. チェックリストの更新履歴

| 日付 | バージョン | 変更内容 | 担当者 |
|-----|-----------|---------|-------|
| 2023-XX-XX | 1.0 | 初版作成 | XXX | 