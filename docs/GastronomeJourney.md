# GastronomeJourney 居酒屋管理アプリ 要件定義書

## 1. 概要
- **目的:**  
  ユーザーが訪れた居酒屋の基本情報や画像を登録し、パブリック／プライベートの投稿設定で管理。さらに、他ユーザーのパブリック投稿に対して「気になるリスト」へ追加する機能を提供することで、居酒屋情報の共有と個人の記録を両立する。

- **プラットフォーム:**  
  Android、iOS（クロスプラットフォーム）

- **使用技術:**  
  Flutter（フロントエンド）、Firebase（認証、データベース、ストレージ、Cloud Functionsなどを利用）
  - 状態管理: Riverpod
  - UIデザイン: Material Design 3

## 2. 機能要件

### 2.1. ユーザー認証・アカウント管理
- **登録／ログイン:**  
  - メールアドレスやSNS連携（例：Google、Apple）によるユーザー登録・ログイン機能  
  - パスワード再設定機能
- **アカウント管理:**  
  - プロフィール編集、アカウント削除

### 2.2. 居酒屋情報の登録
- **入力項目例:**  
  - 居酒屋名称、住所、電話番号、営業時間、定休日、予算、ジャンル（和食、居酒屋、バー、洋食など）
- **登録方法:**  
  - フォーム入力によるデータ登録  
  - 入力値のバリデーション（必須項目、形式チェックなど）

### 2.3. 画像投稿機能
- **機能:**  
  - 居酒屋の外観、内観、料理の写真など複数画像のアップロード  
  - 画像プレビュー、編集（トリミング等）のオプション検討
- **ストレージ:**  
  - Firebase Storageとの連携

### 2.4. 投稿の公開範囲設定
- **設定:**  
  - 投稿時に「パブリック」または「プライベート」を選択  
- **表示:**  
  - パブリック投稿は全ユーザーに公開  
  - プライベート投稿は投稿者のみ閲覧可能

### 2.5. 他ユーザーのパブリック投稿への「気になるリスト」追加機能
- **機能:**  
  - 他ユーザーのパブリック投稿に対して、コメントや「いいね」ではなく「気になるリスト」への追加のみを可能とする  
  - 気になるリストは個人のマイページ等から確認・管理可能

### 2.6. 検索機能
- **検索対象:**  
  - 自分が投稿した居酒屋情報  
  - 他ユーザーのパブリック投稿
- **検索条件:**  
  - キーワード検索（店舗名、エリアなど）  
  - 日付、評価などのフィルタリング（必要に応じて）

### 2.7. ジャンルによるフィルタリング機能
- **機能:**  
  - 居酒屋のジャンル（例：和食、居酒屋、バー、洋食など）での絞り込み  
  - 複数選択による詳細なフィルタリングも検討

## 3. ユーザーインターフェース（UI）設計

### 3.1. デザインガイドライン
- **基本方針:**
  - Material Design 3を採用し、モダンで使いやすいUIを実現
  - ダイナミックカラーを活用し、ユーザーのデバイス設定に合わせた視覚体験の提供
  - アクセシビリティに配慮したコントラストとフォントサイズ

### 3.2. メイン画面
- **ダッシュボード／一覧表示:**  
  - 自分の投稿一覧とパブリック投稿一覧をタブまたはセグメントで切り替え表示  
  - 「気になるリスト」へのアクセスボタン
  - Material 3のカード、リスト、タブバーなどのコンポーネントを活用

### 3.3. 投稿画面
- **入力フォーム:**  
  - 居酒屋情報（テキスト入力、プルダウンメニュー等）  
  - 画像アップロードボタン、プレビュー機能  
  - 公開設定（ラジオボタンやスイッチで選択）
  - Material 3のテキストフィールド、チップ、スイッチなどを活用

### 3.4. 詳細画面
- **内容表示:**  
  - 投稿内容の詳細表示、画像スライドショー  
  - パブリック投稿の場合、気になるリストへの追加ボタン

### 3.5. 検索・フィルタ画面
- **検索バー:**  
  - キーワード入力  
- **フィルタ:**  
  - ジャンル選択、その他の条件（エリア、日付など）

### 3.6. ナビゲーション
- **全体ナビゲーション:**  
  - Material 3のナビゲーションバーやドロワーメニューを使用して、ホーム、投稿、新規登録、マイページなどにアクセス

## 4. バックエンド・データストレージ
- **データベース:**  
  - Firebase Firestoreを利用し、居酒屋情報、投稿、ユーザー情報を管理
- **画像ストレージ:**  
  - Firebase Storageとの連携
- **認証:**  
  - Firebase Authenticationによるユーザー認証
- **データ構造:**  
  - ユーザードキュメント、投稿ドキュメント（パブリック／プライベートのフラグ付）、居酒屋情報、画像URLリストなどを設計

## 5. 非機能要件

- **パフォーマンス:**  
  - 高速なデータ取得、画像ロードの最適化を図るため、Firebaseのキャッシングやリアルタイムデータ更新機能を活用する。  
  - アプリ起動時間、画面遷移のレスポンスはユーザー体験を損なわないよう最適化する。

- **セキュリティ:**  
  - Firebase AuthenticationとFirestoreのセキュリティルールを利用し、ユーザー認証やデータのアクセス制御を厳格に実施する。  
  - HTTPS通信の徹底や、定期的なセキュリティ監査を行う。

- **レスポンシブ対応:**  
  - 各種デバイス（スマートフォン、タブレット、PCなど）に対応したUI設計を行う。  
  - Flutterのウィジェットを活用し、画面サイズに応じたレイアウト調整を実施する。

- **拡張性:**  
  - 今後の機能追加（レビュー機能、SNS連携、地図連携等）を考慮したモジュール化された設計とする。  
  - Firebase Cloud Functionsなどを活用し、サーバーレスアーキテクチャで柔軟な拡張性を持たせる。

- **可用性・信頼性:**  
  - Firebaseの高い信頼性と冗長性を利用し、常時アクセス可能なシステムを構築する。  
  - 定期的なバックアップやフェイルオーバー戦略を検討する。

- **保守性:**  
  - コードの可読性、テストの自動化、十分なドキュメント整備を行い、将来的なメンテナンスを容易にする。  
  - バージョン管理とCI/CDパイプラインを構築することで、迅速なデプロイとリリース管理を実現する。

- **モニタリングとロギング:**  
  - Firebase Performance Monitoring、Crashlyticsを導入し、アプリのパフォーマンス、エラー、クラッシュ状況を常時監視する。  
  - ログの収集と解析により、問題発生時の迅速な対応を可能にする。

- **アクセシビリティ:**  
  - ユーザーの多様なニーズに対応するため、アクセシビリティのガイドラインに沿ったUI設計を行う。  
  - カラーバランスやフォントサイズ、音声読み上げなどのサポートを検討する。

## 6. 開発スケジュールと優先順位

### 6.1. 優先機能（MVP）
- **フェーズ1（最優先）:** 
  - ユーザー認証機能（登録・ログイン）
  - 居酒屋情報の基本的な登録・表示機能
  - 画像アップロード機能（基本）
  - 公開/非公開設定

- **フェーズ2:**
  - 検索・フィルタリング機能
  - 気になるリスト機能

- **フェーズ3:**
  - UI/UX改善
  - パフォーマンス最適化

### 6.2. スケジュール目安
- **MVP開発:** 6週間  
- **フェーズ2機能追加:** 4週間  
- **フェーズ3改善:** 2週間  
- **テストと修正:** 2週間

## 7. 今後の拡張性（オプション）
- **レビュー・評価機能:**  
  - ユーザーが居酒屋に対してレビューや星評価を追加できるように検討
- **SNS連携:**  
  - 投稿のシェア機能、外部SNSへの連携機能
- **地図連携:**  
  - 居酒屋の位置情報をマップ上に表示、ルート案内機能など
